% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/brsr_tsk.R
\name{tsk_auto}
\alias{tsk_auto}
\alias{tsk_auto.numeric}
\alias{tsk_auto.data.frame}
\title{Auto-trimmed TSK Analysis}
\usage{
tsk_auto(x, ...)

\method{tsk_auto}{numeric}(
  x,
  n,
  r,
  control = 0,
  conf.level = 0.95,
  use.log.doses = TRUE,
  max.trim = 0.45,
  ...
)

\method{tsk_auto}{data.frame}(
  x,
  control = 0,
  conf.level = 0.95,
  use.log.doses = TRUE,
  max.trim = 0.45,
  ...
)
}
\arguments{
\item{x}{A numeric vector of doses (for numeric method) or a data frame
containing columns 'x', 'n', and 'r' (for data.frame method).}

\item{...}{Additional arguments passed to the tsk function.}

\item{n}{A numeric vector of total counts (for numeric method only).}

\item{r}{A numeric vector of response counts (for numeric method only).}

\item{control}{A numeric value indicating the control dose (default is 0).}

\item{conf.level}{A numeric value indicating the confidence level (default is 0.95).}

\item{use.log.doses}{A logical value indicating whether to use log-transformed
doses (default is TRUE).}

\item{max.trim}{A numeric value indicating the maximum allowed trim level
(default is 0.45, must be < 0.5).}
}
\value{
The result of the TSK analysis with automatic trimming applied.
}
\description{
This function automatically determines the appropriate trim level for TSK analysis
and applies it. It first tries with no trimming, and if that fails due to responses
not spanning the required range, it automatically calculates and applies the minimum
required trim level based on the data characteristics.
}
\details{
The automatic trimming is triggered when the response proportions don't increase
from the trim level to 1-trim level, which typically occurs when responses are
too close to 0\% or 100\% at the extreme doses.
}
\examples{
\dontrun{
# With numeric vectors - data that needs trimming
doses <- c(0, 1, 2, 3, 4, 5)
total <- rep(20, 6)
responses <- c(0, 2, 8, 14, 18, 20)  # Goes from 0 to 100\%
result <- tsk_auto(doses, total, responses)

# With data frame - moderate responses that may not need trimming
data <- data.frame(
  x = c(0.1, 0.5, 1, 2, 4, 8),
  n = rep(20, 6),
  r = c(2, 5, 8, 12, 15, 17)
)
result <- tsk_auto(data)

# Using hamilton dataset (if available)
if (exists("hamilton")) {
  # Try with one of the hamilton datasets
  result <- tsk_auto(hamilton$dr1a)
}
}
}
